{"version":3,"sources":["main.js","shop.js","controllers/CartCtrl.js","controllers/OrderCtrl.js","directives/cart.js","directives/cart_add.js","directives/cart_remove.js","directives/clear_cart.js","directives/in_cart.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnDA;AACA;AACA;ACFA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"shop.js","sourcesContent":["$(function(){\n    $(\".shop__add-cart\").popover({\n        html: true\n    })\n})","angular.module('shop', ['ngCart', 'ngResource']);\n\n\n/** Замена {{ }} на [[ ]] */\nangular.module('shop').config(function ($interpolateProvider,$locationProvider) {\n    $interpolateProvider.startSymbol('[[');\n    $interpolateProvider.endSymbol(']]');\n    $locationProvider.html5Mode({\n        enabled: true,\n        requireBase: false\n    }); // enable pushState\n\n});\n\n","angular.module('shop').controller('CartCtrl',  function($scope, $http, ngCart) {\n\n\n\n    /**\n     *\n     * @returns {*}\n     */\n    $scope.getUserData = function() {\n        return $http.get('/cart/get_user').success(function(data) {\n            $scope.user = data;\n        })\n    }\n\n    /**\n     * Instance of ngCart\n     */\n    $scope.cart = ngCart;\n\n    /**\n     * Item quantity\n     *\n     * @type {number}\n     */\n    $scope.quantity = 1;\n\n    /**\n     * Check whether there is an item in the basket\n     *\n     * @param id\n     * @returns {*}\n     */\n    $scope.inCart = function(id) {\n        return $scope.cart.getItemById(id);\n    }\n\n    $scope.sendOrder = function() {\n        var cart = $scope.cart.getItems();\n\n        $http.post('/cart/send_order', {\n            cart: cart,\n            user: $scope.user\n        }).success(function(data, status) {\n            alert('Ваш заказ успешно отправлен!');\n            ngCart.empty(1);\n        }).error(function(data, status) {\n            alert('Error');\n        })\n    }\n\n\n})","angular.module('shop').controller('OrderCtrl', function(ngCart) {\n\n})","","angular.module('shop').directive('addCart', [\n    function() {\n        return {\n            restrict: 'A',\n            link: function($scope, element, attrs) {\n                element.bind('click', function() {\n                    var cart = $scope.cart;\n                    if(cart.getItemById(attrs.addCart)) {\n                        var currentQuantity = cart.getItemById(attrs.addCart).getQuantity();\n                        cart.getItemById(attrs.addCart).setQuantity(currentQuantity + $scope.quantity);\n                    }\n                    else {\n                        cart.addItem(\n                            attrs.addCart, attrs.itemName,\n                            attrs.itemPrice, $scope.quantity,\n                            {\n                                'partner': attrs.itemPartner,\n                                'data': {\n                                    'image': attrs.itemImage,\n                                    'partner_name': attrs.itemPartnerName\n                                }\n                            }\n                        );\n                    }\n                    $scope.quantity = 1;\n                    $scope.$apply();\n                })\n            }\n        }\n}])","angular.module('shop').directive('removeCart', [\n    function() {\n        return {\n            restrict: 'A',\n            link: function($scope, element, attrs) {\n                element.bind('click', function() {\n                    var cart = $scope.cart;\n                    if(cart.getItemById(attrs.removeCart)) {\n                        cart.removeItemById(attrs.removeCart);\n                        $(\".item-\"+attrs.removeCart).fadeOut('slow');\n                    }\n                    $scope.$apply();\n                })\n            }\n        }\n    }\n])","angular.module('shop').directive('clearCart', [\n    function() {\n        return {\n            restrict: 'A',\n            link: function($scope, element, attrs) {\n                element.bind('click', function() {\n                   $scope.cart.empty(1);\n                   $(\".shop__in-cart\").html('');\n                   $scope.quantity = 1;\n                   $scope.$apply();\n                })\n            }\n        }\n    }])","angular.module('shop').directive('inCart', [\n    function() {\n        return {\n            restrict: 'A',\n\n            link: function($scope, element, attrs) {\n                if($scope.cart.getItemById(attrs.inCart)) {\n                    element.html('В корзине')\n                }\n\n                $scope.$on('ngCart:itemAdded', function() {\n                    if($scope.cart.getItemById(attrs.inCart)) {\n                        element.html('В корзине')\n                    }\n                });\n\n            }\n        }\n    }])"],"sourceRoot":"/source/"}